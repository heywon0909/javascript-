<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="Jazzaddictâ€™s Intro by Cosimo Fogg (201) | https://soundcloud.com/cosimo-fogg
        Music promoted by https://www.chosic.com/free-music/
        Creative Commons Attribution 3.0 Unported License
        https://creativecommons.org/licenses/by/3.0/deed.en_US">
        <title>
            JS Drum Kit
        </title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div class="keys">
            <div data-key="65" class="key">
                <kbd>A</kbd>
            <span class="sound">clap</span>
            </div>
            <div data-key="83" class="key">
                <kbd>S</kbd>
                <span class="sound">hihat</span>
            </div>
            <div data-key="68"class="key">
                <kbd>D</kbd>
                <span class="sound">kick</span>
            </div>
            <div data-key="70"class="key">
                <kbd>F</kbd>
                <span class="sound">openhat</span>
            </div>
            <div data-key="71" class="key">
                <kbd>G</kbd>
                <span class="sound">boom</span>
            </div>
            <div data-key="72" class="key">
                <kbd>H</kbd>
                <span class="sound">ride</span>
            </div>
            <div data-key="74" class="key">
                <kbd>J</kbd>
                <span class="sound">snare</span>
            </div>
            <div data-key="75" class="key">
                <kbd>K</kbd>
                <span class="sound">tom</span>
            </div>
            <div data-key="76" class="key">
                <kbd>L</kbd>
                <span class="sound">tink</span>
            </div>
        </div>
        <div class="slidecontainer">
            <input type="range" min="0" max="100" value="50" class="slider" id="myRange">
            <p>Value: <span id="demo"></span></p>
        </div>
            

        <audio data-key="65" src="../sounds/clap.wav"></audio>
        <audio data-key="83" src="../sounds/hihat.wav"></audio>
        <audio data-key="68" src="../sounds/kick.wav"></audio>
        <audio data-key="70" src="../sounds/openhat.wav"></audio>
        <audio data-key="71" src="../sounds/boom.wav"></audio>
        <audio data-key="72" src="../sounds/ride.wav"></audio>
        <audio data-key="74" src="../sounds/snare.wav"></audio>
        <audio data-key="75" src="../sounds/tom.wav"></audio>
        <audio data-key="76" src="../sounds/tink.wav"></audio>
        
        
        <div class="back">  
            <audio controls autoplay>
                <source id="back" src="../sounds/bensound-memories.mp3" autoplay>
            </audio>
        </div>  
   
    <script>
        
            
            
        function playSound(e){
            const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
            const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
            if(!audio) return; // sotp the function from running all together;
            audio.currentTime = 0; //rewind the start;
            audio.play();
            key.classList.add('playing');
            slider.oninput = function(e){
            
            audio.volume = this.value / 100;
            output.innerHTML = this.value;
            
            
        }
        }
        function removeTransition(e){
            if(e.propertyName !=='transform') return;
//skip it if it's not a transform
            this.classList.remove('playing');
}

/*function playBack(e){
            const audio1 = document.querySelector(`audio[data-class="back"]`);
            console.log(audio1);
            audio1.volume = 0.5;
            audio1.play();
        }*/


        const keys = document.querySelectorAll('.key');
        keys.forEach(key => key.addEventListener('transitionend',removeTransition));
        window.addEventListener('keydown',playSound);
        /*window.addEventListener('DOMcontentLoaded',playBack);*/
        
       
        var slider = document.getElementById("myRange");
        var output = document.getElementById("demo");
       
        

      
    </script>
    </body>
</html>